# -*- coding: utf-8 -*-
"""
Created on Tue Oct 18 18:44:44 2022

@author: Arman Hossain
"""

from splitter import split_cpe,split_date
import pandas as pd

def read_csv_dataset(path):
    data = pd.read_csv(path)
    indexes = [item.find("** REJECT **") < 0 for item in data.description.values.tolist()]
    
    return data[indexes]

def vendor_name(cpe):
    return split_cpe(cpe)[3]

def vendor_product_name(cpe):
    splited = split_cpe(cpe)
    return (splited[3],splited[4])

def date_yy_mm(date):
    time = split_date(date)
    return (time[0],time[1])
        
def min_max_year(dates):
    mini = 2050
    maxi = 1950
    for sdate in dates:
        date = date_yy_mm(sdate)
        yy = date[0]
        if mini>yy: mini = yy
        if maxi<yy: maxi = yy
    return (mini,maxi)

#%% pickle saving

import pickle
filename = '2002-2022-vendor-year-count.pickle' # your file name
obj = vendor_info # your object 
with open(filename , 'wb') as file:
    pickle.dump(obj, file)

with open(filename, 'rb') as file:
    obj = pickle.load(file)